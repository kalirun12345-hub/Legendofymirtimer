<!DOCTYPE html>
<html>
<head>
    <title>Admin - Boss Settings</title>
    <style>
        body { background: #0f1215; color: white; font-family: sans-serif; text-align: center; padding: 30px; }
        .box { background: #1c2126; border: 1px solid #343b42; padding: 20px; border-radius: 10px; max-width: 400px; margin: 20px auto; }
        input { padding: 12px; width: 85%; border-radius: 5px; border: 1px solid #d4af37; background: #000; color: white; margin-bottom: 15px; }
        button { padding: 12px; background: #d4af37; border: none; cursor: pointer; font-weight: bold; border-radius: 5px; width: 90%; margin: 5px; transition: 0.2s; }
        button:hover { opacity: 0.8; }
        .test-btn { background: #3498db; color: white; }
        .status { margin-top: 15px; font-weight: bold; height: 20px; }
        a { color: #d4af37; text-decoration: none; display: block; margin-top: 20px; }
    </style>
</head>
<body>
    <h1>⚙️ Admin Dashboard</h1>

    <div class="box">
        <h3>System Test</h3>
        <p style="font-size: 0.8rem; color: #888;">This sends a test signal through Google to Discord.</p>
        <button class="test-btn" onclick="testConnection()">SEND TEST PING</button>
        <div id="statusMsg" class="status"></div>
    </div>

    <div class="box">
        <h3>Respawn Timer (Minutes)</h3>
        <input type="number" id="respawnMins" placeholder="Default: 120">
        <button onclick="saveTime()">Update Timer Settings</button>
    </div>

    <p><a href="index.html">← Back to Tracker</a></p>

    <script>
        const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzM2yeTWYle0Ufevgdw9Q98hkhE4Crcjo6iRTAdDh_rNCpYG9XqvMPbPFj7j9WekxqA/exec";

        async function testConnection() {
            const status = document.getElementById('statusMsg');
            status.innerText = "Sending signal...";
            status.style.color = "#3498db";

            try {
                await fetch(GOOGLE_SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    body: JSON.stringify({ type: "TEST_WEBHOOK" })
                });
                status.innerText = "Signal Sent! Check Discord.";
                status.style.color = "#2ecc71";
            } catch (err) {
                status.innerText = "Failed to reach Google.";
                status.style.color = "#e74c3c";
            }
        }

        function saveTime() {
            const mins = document.getElementById('respawnMins').value;
            localStorage.setItem('respawn_setting', mins);
            alert("Respawn timer updated!");
        }

        // Set initial value
        document.getElementById('respawnMins').value = localStorage.getItem('respawn_setting') || 120;
    </script>
</body>
</html>
